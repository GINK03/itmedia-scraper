　IoT（モノのインターネット）向けプラットフォームを提供しているソラコムは、同社初のカンファレンス「Connected」を開催。技術面を開設するセッション「SORACOM Air再発見-プログラマブルなSIMで実現できること」では、「SORACOM Air」のAPIを活用する方法を解説した。同セッションでは、訪日外国人向けのプリペイドSIMを提供するeConnect JapanのCEO／Founderである小山修平氏もゲストとして登壇。同社はソラコムをMVNEとしてMVNOを展開しているが、そのサービスがどのような技術で実現しているのかを披露した。 　セッションの冒頭、ソラコムのシニアソフトウェアエンジニア 小熊崇氏は、あらためてSORACOM Airの特徴を紹介。「ドコモとAWSを直結して動かしている。専用線で接続したAWS上でファンクションを実行し、インターネットにつながっている」としながら、コンソール上から、通信速度の変更や、データ通信の停止／再開、解約を行えることを解説した。 　それ以上に複雑な作業を自動化できるのが、同社が提供しているAPIだ。「APIを直接呼び出すと、Webで手作業をする必要なく、プログラムなどを組んで自動化することができる」のが、そのメリット。IoT用の膨大なSIMカードを管理する際には「APIを使った自動化が必要になってくる」が、「これが他社のSIMでは難しかった」といい、ソラコムとしての大きな特徴になっている。 　また、APIは「速度変更や休止／再開、解約だけでなく、多彩な機能を有している」といい、小熊氏は6つの機能を紹介した。 　1つ目が「タグ」と呼ばれるもので、「任意の管理データを入れ、タグに着けた値や名前で検索ができる」ために使用する。2つ目は「グループ」機能。これは、複数のSIMカードを1つにまとめて、設定などを一括で適用するためのものだ。 　3つ目に挙げられていたのが、「イベントハンドラー」。これは、「データ通信量が上限を超えたときなど、一定の条件を超えたときにアクションを起こせる機能」。例えば、データ通信量が総量で100MBを超えたときにメールを送ったり、AWSの「Lambda」を呼び出して処理を加えるといったことが可能になる。 　4つ目が、「カスタムDNS」。ソラコムのSIMが接続するDNS（Domain Name System：ドメイン名を管理するシステム）を任意のものに書き換える機能で、これによって、キャプティブポータルと呼ばれるものをデバイス側に表示できる。キャプティブポータルとは、「ホテルのWi-Fiなどにあるような、（強制的に表示させる）ログイン画面のようなもの」で、SIMカードを使った通信でも、同様のサイトを表示させることが可能になる。 　5つ目が「メタデータ」で、ソラコム側が持っている速度設定などの情報を呼び出す機能。6つ目が「SIMのオペレーター間移動」で、未使用状態のときに限り、アカウントを別のユーザーに受け渡すことができる。この機能があることで、ソラコムのSIMカードを入れた状態のままデバイスを販売したときにも、管理権限を購入者に移せるようになっている。 　こうしたソラコムのAPIを使った1つの事例として、eConnect Japanの訪日外国人向け「JAPAN PREPAID SIM」が紹介された。同社の小山氏によると、eConnect Japanは2012年の1月に設立され、以降一貫して、訪日外国人向けのSIMカードの販売を行っているという。当初は別のMVNEを利用していたが、ソラコムがサービスを開始した2015年9月に「全てのSIMカードを変更した」。現在では、小熊氏が挙げていたソラコムのAPIを使い、課金や認証を自動化した上で、Android、iOS向けのアプリも提供している。 　SORACOMを利用する前は、「他のMVNO（MNVE）が設定しているプランを、流用するしかなかった」が、APIを組み合わせることで、料金にも柔軟性を出すことができた。eConnect Japanでは、1GB、3GB、5GBの「定量型プラン」に加え、1日あたり100MBまで使える7日、15日、30日の「日数型プラン」の2つを提供している。 　小山氏は、それぞれの実装方法も解説した。定量型のプランについては、累積のデータ量が上限に達すると、APIの「イベントハンドラー」がそれを検知。AWSのLambdaから、eConnect JapanのAPIを呼び出し、SIMカードに対して休止の処理をかける。日数型プランに関しては、同様に100MBを超えたときにLambdaを呼び出し、速度変更の機能を実行するという。日数型プランに関しては、0時にリセットをかけるようにしており、これで通信速度を元に戻すようにしている。 　eConnect Japanでは、ユーザーに提供しているアプリでもAPIを活用している。同社のアプリには一定の通信量を超えると端末側に通知を表示させる機能が搭載されているが、これも先の「イベントハンドラー」によって実現している。具体的には、ユーザーがアプリで2.5GBと設定すると、それをイベントハンドラーに登録して、実際にデータ量が達した際に、Lambda経由でプッシュ通知を送るように実装している。 　ほかにも、eConnect Japanは、ソラコムのAPIを活用して、アクティベートを自動化した。これによって、「SIMカードを使い始める前にアクティベートの処理が必要な場合があるが、インターネットを使うためにSIMカードを買っているのに、そのSIMをアクティベートするためにWi-Fiが必要で本末転倒」で、クレームを受けていた状況を改善できたという。小山氏によると、現在、APIの1つである「カスタムDNS」を使った機能も実装中とのこと。これが実現すれば、データ容量を使い切った際に、通信を切らず、同社のリチャージ用サイトに誘導することが可能になる。 　eConnect Japanは、IoTではなく、対人向けのサービスを提供しているが、ソラコムの小熊氏も「まさか訪日外国人向けに使っていただけるとは思っておらず、驚いた」という。一方で、用途を限らない自由度の高さも、SORACOMの大きな魅力だとしながら、「安さだけでなく、付加価値をつけたビジネスを行っていただける」としてセッションを締めくくった。 基本情報から価格比較まで――格安SIMの情報はここでチェック！→「SIM LABO」 Copyright© 2017 ITmedia, Inc. All Rights Reserved. この記事が気に入ったらITmedia Mobile に「いいね！」しよう